{"version":3,"file":"extension.js","sources":["../../../../src/Logic/CommonLogic.ts","../../../../src/Logic/ApplicationPurchaseEquipmentLogic.ts","../../../../src/EventHandlers/ApplicationPurchaseEquipmentHandlers.ts","../../../../src/Index.ts"],"sourcesContent":["import { GenModels } from \"@docsvision/webclient/Generated/DocsVision.WebClient.Models\";\r\n\r\nexport class CommonLogic {\r\n    protected tryParseInt(value: string | null | undefined) {\r\n        if (value === null || value === undefined || typeof value !== 'string') {\r\n            return undefined;\r\n        }\r\n\r\n        const parsed = parseInt(value, 10);\r\n\r\n        return isNaN(parsed) ? undefined : parsed;\r\n    }\r\n    \r\n    public getEmployeeStatusString(status: GenModels.StaffEmployeeStatus): string {\r\n        switch (status) {\r\n        case GenModels.StaffEmployeeStatus.Active:\r\n            return \"Активен\";\r\n        case GenModels.StaffEmployeeStatus.Sick:\r\n            return \"Больничный\";\r\n        case GenModels.StaffEmployeeStatus.Vacation:\r\n            return \"Отпуск\";\r\n        case GenModels.StaffEmployeeStatus.BusinessTrip:\r\n            return \"Командировка\";\r\n        case GenModels.StaffEmployeeStatus.Absent:\r\n            return \"Отсутствует\";\r\n        case GenModels.StaffEmployeeStatus.Discharged:\r\n            return \"Уволен\";\r\n        case GenModels.StaffEmployeeStatus.Transfered:\r\n            return \"Переведён\";\r\n        case GenModels.StaffEmployeeStatus.DischargedNoRestoration:\r\n            return \"Уволен без восстановления\";\r\n        default:\r\n            return \"Неизвестный статус\";\r\n        }\r\n  }\r\n}","import { ILayout } from \"@docsvision/webclient/System/$Layout\";\r\nimport { CommonLogic } from \"./CommonLogic\";\r\nimport { $MessageBox } from \"@docsvision/webclient/System/$MessageBox\";\r\n\r\nimport { DirectoryDesignerRow } from \"@docsvision/webclient/BackOffice/DirectoryDesignerRow\";\r\nimport { NumberControl } from \"@docsvision/webclient/Platform/Number\";\r\nimport { GenModels } from \"@docsvision/webclient/Generated/DocsVision.WebClient.Models\";\r\nimport { $DepartmentController, $EmployeeController } from \"@docsvision/webclient/Generated/DocsVision.WebClient.Controllers\";\r\nimport { isEmptyGuid } from \"@docsvision/webclient/System/GuidUtils\";\r\nimport { layoutManager } from \"@docsvision/webclient/System/LayoutManager\";\r\nimport { ICancelableEventArgs } from \"@docsvision/webclient/System/ICancelableEventArgs\";\r\nimport { ILayoutBeforeSavingEventArgs } from \"@docsvision/webclient/System/ILayoutParams\";\r\nimport { DateTimePicker } from \"@docsvision/webclient/Platform/DateTimePicker\";\r\nimport { TextArea } from \"@docsvision/webclient/Platform/TextArea\";\r\n\r\n\r\nexport class ApplicationPurchaseEquipmentLogic extends CommonLogic {\r\n\r\npublic async showFullCombinedContent(layout: ILayout) {\r\n    let messageLines = [];\r\n    \r\n    const fieldsToCheck = [\r\n        { name: \"textBoxName\", type: \"TextBox\", },\r\n        { name: \"dateTimePicker1\", type: \"DateTimePicker\", },\r\n        { name: \"regDate1\", type: \"DateTimePicker\", },\r\n        { name: \"regDate11\", type: \"DateTimePicker\", },\r\n        { name: \"textArea1\", type: \"TextArea\", }\r\n    ];\r\n    \r\n    for (let field of fieldsToCheck) {\r\n        let control = layout.controls.get(field.name) as any;\r\n        \r\n        if (!control) {\r\n            messageLines.push(` ${field.name}: не найден`);\r\n            continue;\r\n        }\r\n        \r\n        let value = control.params?.value;\r\n        let fieldLabel = control.params?.labelText || field.name;\r\n        \r\n        if (value === null || value === undefined || value === \"\") {\r\n            messageLines.push(` ${fieldLabel}: пусто`);\r\n        } else {\r\n            let displayValue;\r\n            if (field.type === \"DateTimePicker\") {\r\n                const date = new Date(value);\r\n                displayValue = date.toLocaleDateString('ru-RU');\r\n            } else if (field.type === \"TextArea\") {\r\n                displayValue = value.length > 100 ? value.substring(0, 100) + \"...\" : value;\r\n            } else {\r\n                displayValue = value.toString();\r\n            }\r\n            \r\n            messageLines.push(` ${fieldLabel}: ${displayValue}`);\r\n        }\r\n    }\r\n    \r\n    await layout.getService($MessageBox).showInfo(\r\n        messageLines.join('\\n\\n'),\r\n        \"Содержимое необходимых полей\"\r\n    );\r\n}\r\n}","import { ApplicationPurchaseEquipmentLogic } from \"../Logic/ApplicationPurchaseEquipmentLogic\";\r\nimport { GenModels } from \"@docsvision/webclient/Generated/DocsVision.WebClient.Models\";\r\nimport { IDataChangedEventArgs, IDataChangedEventArgsEx } from \"@docsvision/webclient/System/IDataChangedEventArgs\";\r\nimport { StaffDirectoryItems } from \"@docsvision/webclient/BackOffice/StaffDirectoryItems\";\r\n\r\n\r\n\r\n/**\r\n * Выводит содержимое заданных контролов при нажатии на кнопку \"Ззапрос данных\"\r\n * @param sender контролы\r\n */\r\nexport async function ddApplicationPurchaseEquipment_requestFullInfo_onDataChanged(\r\n    sender: StaffDirectoryItems, \r\n    args: IDataChangedEventArgsEx<GenModels.IDirectoryItemData>) {\r\n    \r\n    if (!sender) { return; }\r\n    let logic = new ApplicationPurchaseEquipmentLogic();\r\n    \r\n    await logic.showFullCombinedContent(sender.layout);\r\n}\r\n\r\n","﻿import * as ApplicationPurchaseEquipmentHandlers from \"./EventHandlers/ApplicationPurchaseEquipmentHandlers\";\r\nimport { extensionManager } from \"@docsvision/webclient/System/ExtensionManager\";\r\n\r\n// Главная входная точка всего расширения\r\n// Данный файл должен импортировать прямо или косвенно все остальные файлы, \r\n// чтобы rollup смог собрать их все в один бандл.\r\n\r\n// Регистрация расширения позволяет корректно установить все\r\n// обработчики событий, сервисы и прочие сущности web-приложения.\r\nextensionManager.registerExtension({\r\n    name: \"ExampleWebExtension\",\r\n    version: \"1.0\",\r\n    globalEventHandlers: [ ApplicationPurchaseEquipmentHandlers ],\r\n    layoutServices: [],\r\n    controls: []\r\n})"],"names":["GenModels","__extends","$MessageBox","extensionManager"],"mappings":"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"}